(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{416:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"stage0-数据准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage0-数据准备"}},[s._v("#")]),s._v(" stage0 数据准备")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/export/a05/xna/data "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改为自己存放Data的位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("data_url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("www.openslr.org/resources/33\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" ./cmd.sh "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置本地运行/群集")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" ./path.sh "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置需要的路径")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit on error")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将$data_url下载到$data/data_aishell文件夹中")]),s._v("\nlocal/download_and_untar.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data_url")]),s._v(" data_aishell\nlocal/download_and_untar.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data_url")]),s._v(" resource_aishell\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Data Preparation")]),s._v("\nlocal/aishell_data_prep.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/data_aishell/wav "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/data_aishell/transcript\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("set -e")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://blog.csdn.net/l1394049664/article/details/81741106",target:"_blank",rel:"noopener noreferrer"}},[s._v("shell脚本中 “set -e” 的作用"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("你写的每个脚本都应该在文件开头加上"),t("code",[s._v("set -e")]),s._v("，这句语句告诉bash如果任何语句的执行结果不是true则应该退出。这样的好处是防止错误像滚雪球般变大导致一个致命的错误，而这些错误本应该在之前就被处理掉。如果要增加可读性，可以使用"),t("code",[s._v("set -o errexit")]),s._v("，它的作用与"),t("code",[s._v("set -e")]),s._v("相同。")])])]),s._v(" "),t("h3",{attrs:{id:"local-download-and-untar-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#local-download-and-untar-sh"}},[s._v("#")]),s._v(" local/download_and_untar.sh")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("remove_archive")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有运行这里")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" --remove-archive "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("remove_archive")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("shift")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有运行这里")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -ne "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' [--remove-archive] <data-base> <url-base> <corpus-part>"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e.g.: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' /export/a05/xna/data www.openslr.org/resources/33 data_aishell"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"With --remove-archive it will remove the archive after successfully un-tarring it."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<corpus-part> can be one of: data_aishell, resource_aishell."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("$# -ne 3")]),s._v(" "),t("p",[s._v("传入的参数总数不等于3")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("part")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": no such directory "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v('"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("part_ok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("list")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data_aishell resource_aishell"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("x")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$list")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("part_ok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有运行这里")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part_ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": expected <corpus-part> to be one of "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$list")]),s._v(", but got '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v("'\"")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查下载链接是否存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -z "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$url")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(': empty URL base."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v("/.complete "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": data part "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(' was already successfully extracted, nothing to do."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("参数说明")]),s._v(" "),t("p",[t("code",[s._v("-z")]),s._v("：测试指定字符是否为空，空着真，非空为假；")]),s._v(" "),t("p",[t("code",[s._v("-f")]),s._v("：测试文件是否为普通文件")])]),s._v(" "),t("li",[t("p",[s._v("exit 0")]),s._v(" "),t("p",[s._v("exit命令用于退出当前shell，在shell脚本中可以终止当前脚本执行，如果前面执行成功的话，以0值为返回值退出。")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sizes of the archive files in bytes.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sizes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"15582913665 1246920"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已经提前下载好，已有tgz压缩文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".tgz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("/bin/ls -l $data/$part.tgz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5")]),s._v("}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("size_ok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查是否下载完整")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("s")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sizes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$s")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("size_ok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$size_ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": removing existing file "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".tgz because its size in bytes "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$size")]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"does not equal the size of one of the archives."')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".gz\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v('.tgz exists and appears to be complete."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".tgz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(': wget is not installed."')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("full_url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$url")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".tgz\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": downloading data from "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$full_url")]),s._v('.  This may take some time, please be patient."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" --no-check-certificate "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$full_url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": error executing wget "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$full_url")]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("size=$(/bin/ls -l "),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("d")]),t("mi",[s._v("a")]),t("mi",[s._v("t")]),t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v("/")])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("data/")])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("d")]),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord mathdefault"},[s._v("t")]),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v("/")])])])])]),s._v("part.tgz | awk '{print $5}')")],1),s._v(" "),t("p",[t("code",[s._v("/bin/ls -l")]),s._v("：使用较长格式列出信息")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("-rwxrwxrwx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zwj zwj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15582913665")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("月   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" /media/zwj/数据集/kaldi/data_aishell.tgz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("awk '{print $5}'")]),s._v("：输出第五个域的信息（字节数）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15582913665")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 看到这里--------------------------------------------------------------------------------------")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvzf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".tgz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": error un-tarring archive "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v('.tgz"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v("/.complete\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data_aishell"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v("/wav\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("wav")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" ./*.tar.gz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Extracting wav from '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$wav")]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$wav")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$wav")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": Successfully downloaded and un-tarred "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v('.tgz"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remove_archive")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(": removing "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v('.tgz file since --remove-archive option was supplied."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$data")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$part")]),s._v(".tgz\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h3",{attrs:{id:"local-aishell-data-prep-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#local-aishell-data-prep-sh"}},[s._v("#")]),s._v(" local/aishell_data_prep.sh")]),s._v(" "),t("ul",[t("li",[s._v("执行local/aishell_data_prep.sh后")])]),s._v(" "),t("blockquote",[t("p",[s._v("只显示到2级目录：")]),s._v(" "),t("p",[s._v("data_aishell\n├── transcript\n│   └── aishell_transcript_v0.8.txt\n└──  wav\n├──  dev\n├──  test\n└──  train其他")])]),s._v(" "),t("p",[s._v("其中，dev/test/train文件结构一致，内有以spkID命名的文件夹，其中存放对应speaker的wav文件。")]),s._v(" "),t("h2",{attrs:{id:"stage1-提取mfcc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage1-提取mfcc"}},[s._v("#")]),s._v(" stage1 提取MFCC")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mfccdir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mfcc\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("x")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" train "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $train_cmd即为cmd.sh内设置")]),s._v("\n  steps/make_mfcc.sh --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" data/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v(" exp/make_mfcc/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mfccdir")]),s._v("\n  sid/compute_vad_decision.sh --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" data/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v(" exp/make_mfcc/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mfccdir")]),s._v("\n  utils/fix_data_dir.sh data/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"steps-make-mfcc-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#steps-make-mfcc-sh"}},[s._v("#")]),s._v(" steps/make_mfcc.sh")]),s._v(" "),t("p",[s._v("这是软链接，链接到"),t("code",[s._v("/kaldi/egs/wsj/s5/steps")])]),s._v(" "),t("h3",{attrs:{id:"sid-compute-vad-decision-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sid-compute-vad-decision-sh"}},[s._v("#")]),s._v(" sid/compute_vad_decision.sh")]),s._v(" "),t("h3",{attrs:{id:"utils-fix-data-dir-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#utils-fix-data-dir-sh"}},[s._v("#")]),s._v(" utils/fix_data_dir.sh")]),s._v(" "),t("h2",{attrs:{id:"stage2-训练ubm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage2-训练ubm"}},[s._v("#")]),s._v(" stage2  训练UBM")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# train diag ubm")]),s._v("\nsid/train_diag_ubm.sh --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" --num-threads "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  data/train "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v(" exp/diag_ubm_1024\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#train full ubm")]),s._v("\nsid/train_full_ubm.sh --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" data/train "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/diag_ubm_1024 exp/full_ubm_1024\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("nj")]),s._v("，"),t("code",[s._v("num-threads")]),s._v("的含义")])]),s._v(" "),t("h3",{attrs:{id:"sid-train-diag-ubm-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sid-train-diag-ubm-sh"}},[s._v("#")]),s._v(" sid/train_diag_ubm.sh")]),s._v(" "),t("h3",{attrs:{id:"sid-train-full-ubm-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sid-train-full-ubm-sh"}},[s._v("#")]),s._v(" sid/train_full_ubm.sh")]),s._v(" "),t("h2",{attrs:{id:"stage3-训练ivector提取器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage3-训练ivector提取器"}},[s._v("#")]),s._v(" stage3  训练ivector提取器")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("sid/train_ivector_extractor.sh --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v(' --mem 10G"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --num-iters "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" exp/full_ubm_1024/final.ubm data/train "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/extractor_1024\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"sid-train-ivector-extractor-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sid-train-ivector-extractor-sh"}},[s._v("#")]),s._v(" sid/train_ivector_extractor.sh")]),s._v(" "),t("h2",{attrs:{id:"stage4-提取ivector"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage4-提取ivector"}},[s._v("#")]),s._v(" stage4 提取ivector")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("sid/extract_ivectors.sh --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/extractor_1024 data/train exp/ivector_train_1024\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"sid-extract-ivectors-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sid-extract-ivectors-sh"}},[s._v("#")]),s._v(" sid/extract_ivectors.sh")]),s._v(" "),t("h2",{attrs:{id:"stage5-训练plda模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage5-训练plda模型"}},[s._v("#")]),s._v(" stage5 训练PLDA模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#train plda")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v(" exp/ivector_train_1024/log/plda.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ivector-compute-plda ark:data/train/spk2utt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ark:ivector-normalize-length scp:exp/ivector_train_1024/ivector.scp  ark:- |'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/ivector_train_1024/plda\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"ivector-compute-plda"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ivector-compute-plda"}},[s._v("#")]),s._v(" ivector-compute-plda")]),s._v(" "),t("h3",{attrs:{id:"ivector-normalize-length"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ivector-normalize-length"}},[s._v("#")]),s._v(" ivector-normalize-length")]),s._v(" "),t("h2",{attrs:{id:"stage6-划分注册与测试集"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage6-划分注册与测试集"}},[s._v("#")]),s._v(" stage6 划分注册与测试集")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#split the test to enroll and eval")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p data/test/enroll data/test/eval\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" data/test/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("spk2utt,feats.scp,vad.scp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" data/test/enroll\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" data/test/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("spk2utt,feats.scp,vad.scp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" data/test/eval\nlocal/split_data_enroll_eval.py data/test/utt2spk  data/test/enroll/utt2spk  data/test/eval/utt2spk\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("trials")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("data/test/aishell_speaker_ver.lst\nlocal/produce_trials.py data/test/eval/utt2spk "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$trials")]),s._v("\nutils/fix_data_dir.sh data/test/enroll\nutils/fix_data_dir.sh data/test/eval\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"local-split-data-enroll-eval-py"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#local-split-data-enroll-eval-py"}},[s._v("#")]),s._v(" local/split_data_enroll_eval.py")]),s._v(" "),t("h3",{attrs:{id:"local-produce-trials-py"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#local-produce-trials-py"}},[s._v("#")]),s._v(" local/produce_trials.py")]),s._v(" "),t("h2",{attrs:{id:"stage7-提取ivector"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage7-提取ivector"}},[s._v("#")]),s._v(" stage7  提取ivector")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#extract enroll ivector")]),s._v("\nsid/extract_ivectors.sh --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/extractor_1024 data/test/enroll  exp/ivector_enroll_1024\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#extract eval ivector")]),s._v("\nsid/extract_ivectors.sh --cmd "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v('"')]),s._v(" --nj "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/extractor_1024 data/test/eval  exp/ivector_eval_1024\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"sid-extract-ivectors-sh-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sid-extract-ivectors-sh-2"}},[s._v("#")]),s._v(" sid/extract_ivectors.sh")]),s._v(" "),t("h2",{attrs:{id:"stage8-打分并计算eer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stage8-打分并计算eer"}},[s._v("#")]),s._v(" stage8  打分并计算EER")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#compute plda score")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$train_cmd")]),s._v(" exp/ivector_eval_1024/log/plda_score.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ivector-plda-scoring --num-utts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ark:exp/ivector_enroll_1024/num_utts.ark "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  exp/ivector_train_1024/plda "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  ark:exp/ivector_enroll_1024/spk_ivector.ark "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ark:ivector-normalize-length scp:exp/ivector_eval_1024/ivector.scp ark:- |"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"cat '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$trials")]),s._v("' | awk '{print "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("\\"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("\\"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("}' |\"")]),s._v(" exp/trials_out\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#compute eer")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v("}'")]),s._v(" exp/trials_out "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("paste")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$trials")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$4")]),s._v("}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" compute-eer -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"ivector-plda-scoring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ivector-plda-scoring"}},[s._v("#")]),s._v(" ivector-plda-scoring")]),s._v(" "),t("h3",{attrs:{id:"compute-eer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compute-eer"}},[s._v("#")]),s._v(" compute-eer")]),s._v(" "),t("h2",{attrs:{id:"shell命令整理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shell命令整理"}},[s._v("#")]),s._v(" shell命令整理")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://blog.csdn.net/dqxiaoxiao/article/details/80312744",target:"_blank",rel:"noopener noreferrer"}},[s._v("kaldi中文语音识别_基于thchs30(4) - dqxiaoxiao的博客 - CSDN博客"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"exit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exit"}},[s._v("#")]),s._v(" exit")]),s._v(" "),t("p",[s._v("同于退出shell，并返回给定值。在shell脚本中可以终止当前脚本执行。执行exit可使shell以指定的状态值退出。若不设置状态值参数，则shell以预设值退出。状态值0代表执行成功，其他值代表执行失败。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("检查上一命令脚本的退出码")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./mycommand.sh\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EXCODE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$EXCODE")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"O.K"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("一些约定")]),s._v(" "),t("p",[s._v("0表示成功（Zero - Success）\n非0表示失败（Non-Zero  - Failure）\n2表示用法不当（Incorrect Usage）\n127表示命令没有找到（Command Not Found）\n126表示不是可执行的（Not an executable）\n>=128 信号产生")])]),s._v(" "),t("li",[t("p",[s._v("在脚本中，进入脚本所在目录，否则退出")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" $0"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"awk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#awk"}},[s._v("#")]),s._v(" awk")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://www.cnblogs.com/ggjucheng/archive/2013/01/13/2858470.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux awk命令详解"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("awk是一个强大的文本分析工具，相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行各种分析处理。它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表，还有无数其他的功能。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{pattern + action}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("filenames"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("pattern")]),s._v("表示 AWK 在数据中查找的内容，而 "),t("code",[s._v("action")]),s._v("是在找到匹配内容时所执行的一系列命令。花括号（{}）不需要在程序中始终出现，但它们用于根据特定的模式对一系列指令进行分组。"),t("code",[s._v("pattern")]),s._v("就是要表示的正则表达式，用斜杠括起来。")]),s._v(" "),t("h4",{attrs:{id:"工作流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工作流程"}},[s._v("#")]),s._v(" 工作流程")]),s._v(" "),t("p",[s._v("读入有'\\n'换行符分割的一条记录，然后将记录按指定的域分隔符划分域，填充域，$0则表示所有域，"),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mn",[s._v("1")]),t("mtext",[s._v("表示第一个域，")])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("1表示第一个域，")])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.68333em","vertical-align":"0em"}}),t("span",{staticClass:"mord"},[s._v("1")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("表")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("示")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("第")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("一")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("个")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("域")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("，")])])])])]),s._v('n表示第n个域。默认域分隔符是"空白键" 或 "[tab]键",所以$1表示登录用户，$3表示登录用户ip,以此类推。')],1),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@www ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# last -n 5 <==仅取出前五行")]),s._v("\nroot     pts/1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.100  Tue Feb "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":21   still logged "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\nroot     pts/1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.100  Tue Feb "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" 00:46 - 02:28  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("01:41"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nroot     pts/1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.100  Mon Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":41 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":30  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("06:48"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndmtsai   pts/1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.100  Mon Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":41 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":41  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00:00"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nroot     tty1                   Fri Sep  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":09 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":10  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00:01"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("改变域分隔符")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  -F "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("}'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("同时输出多个域")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  -F "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$7")]),s._v("}'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v('账户与shell之间以逗号分割,而且在所有行添加列名name,shell,在最后一行添加"blue,/bin/nosh"')]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  -F "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN {print "name,shell"}  {print '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('","'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$7")]),s._v('} END {print "blue,/bin/nosh"}\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("先执行BEGING，然后读取文件，读入有/n换行符分割的一条记录，然后将记录按指定的域分隔符划分域，填充域，$0则表示所有域，"),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mn",[s._v("1")]),t("mtext",[s._v("表示第一个域，")])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("1表示第一个域，")])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.68333em","vertical-align":"0em"}}),t("span",{staticClass:"mord"},[s._v("1")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("表")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("示")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("第")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("一")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("个")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("域")]),t("span",{staticClass:"mord cjk_fallback"},[s._v("，")])])])])]),s._v("n表示第n个域,随后开始执行模式所对应的动作action。接着开始读入第二条记录······直到所有的记录都读完，最后执行END操作。")],1)]),s._v(" "),t("li",[t("p",[s._v("搜索/etc/passwd有root关键字的所有行")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/root/'")]),s._v(" /etc/passwd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"内置变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内置变量"}},[s._v("#")]),s._v(" 内置变量")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ARGC               命令行参数个数\nARGV               命令行参数排列\nENVIRON            支持队列中系统环境变量的使用\nFILENAME           awk浏览的文件名\nFNR                浏览文件的记录数\nFS                 设置输入域分隔符，等价于命令行 -F选项\nNF                 浏览记录的域的个数\nNR                 已读的记录数\nOFS                输出域分隔符\nORS                输出记录分隔符\nRS                 控制记录分隔符\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("统计/etc/passwd:文件名，每行的行号，每行的列数，对应的完整行内容")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  -F "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "filename:" FILENAME ",linenumber:" NR ",columns:" NF ",linecontent:"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v("}'")]),s._v(" /etc/passwd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用printf替代print,可以让代码更加简洁，易读")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  -F "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{printf(\"filename:%10s,linenumber:%s,columns:%s,linecontent:%s"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('",FILENAME,NR,NF,'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(")}'")]),s._v(" /etc/passwd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("print与printf的区别")]),s._v(" "),t("p",[s._v("print函数的参数可以是变量、数值或者字符串。字符串必须用双引号引用，参数用逗号分隔。如果没有逗号，参数就串联在一起而无法区分。这里，逗号的作用与输出文件的分隔符的作用是一样的，只是后者是空格而已。")]),s._v(" "),t("p",[s._v("printf函数，其用法和c语言中printf基本相似,可以格式化字符串,输出复杂时，printf更加好用，代码更易懂。")])])]),s._v(" "),t("h4",{attrs:{id:"awk编程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#awk编程"}},[s._v("#")]),s._v(" awk编程")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("变量和赋值")]),s._v(" "),t("p",[s._v("统计/etc/passwd的账户人数：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{count++;print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(';} END{print "user count is ", count}\'')]),s._v(" /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nuser count is  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("变量初始化是0，但最好先做初始化：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN {count=0;print "[start]user count is ", count} {count=count+1;print '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(';} END{print "[end]user count is ", count}\'')]),s._v(" /etc/passwd\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("user count is  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("end"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("user count is  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("统计某个文件夹下的文件占用的字节数，统计不包括文件夹的子目录：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -l "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN {size=0;} {size=size+"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5")]),s._v(';} END{print "[end]size is ", size}\'')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("end"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("size is  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8657198")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("字节数以M为单位：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -l "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN {size=0;} {size=size+"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5")]),s._v(';} END{print "[end]size is ", size/1024/1024,"M"}\'')]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("end"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("size is  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.25889")]),s._v(" M\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("条件语句")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expression"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单分支")]),s._v("\n    statement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    statement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expression"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 双分支")]),s._v("\n    statement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    statement2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expression"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 多分支")]),s._v("\n    statement1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expression1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    statement2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    statement3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("统计某个文件夹下的文件占用的字节数,过滤4096大小的文件(一般都是文件夹):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -l "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN {size=0;print "[start]size is ", size} {if('),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5")]),s._v("!=4096){size=size+"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5")]),s._v(';}} END{print "[end]size is ", size/1024/1024,"M"}\'')]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("end"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("size is  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.22339")]),s._v(" M\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("循环语句")]),s._v(" "),t("p",[s._v("支持while、do/while、for、break、continue，这些关键字的语义和C语言中的语义完全相同")])]),s._v(" "),t("li",[t("p",[s._v("数组")]),s._v(" "),t("p",[s._v("awk中数组的下标可以是数字和字母，数组的下标通常被称为关键字(key)。值和关键字都存储在内部的一张针对key/value应用hash的表格里。由于hash不是顺序存储，因此在显示数组内容时会发现，它们并不是按照你预料的顺序显示出来的。数组和变量一样，都是在使用时自动创建的，awk也同样会自动判断其存储的是数字还是字符串。一般而言，awk中的数组用来从记录中收集信息，可以用于计算总和、统计单词以及跟踪模板被匹配的次数等等。")]),s._v(" "),t("p",[s._v("显示/etc/passwd的账户：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN {count=0;} {name[count] = "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(";count++;}; END{for (i = 0; i < NR; i++) print i, name[i]}'")]),s._v(" /etc/passwd\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" root\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" daemon\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" bin\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" sys\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" games\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"常用参数的含义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用参数的含义"}},[s._v("#")]),s._v(" 常用参数的含义")]),s._v(" "),t("p",[t("strong",[s._v("$0")]),s._v(" 就是当前shell脚本本身的名字；")]),s._v(" "),t("p",[t("strong",[s._v("$1")]),s._v(" 是你给你写的shell脚本传的第一个参数；")]),s._v(" "),t("p",[t("strong",[s._v("$2")]),s._v(" 是你给你写的shell脚本传的第二个参数；")]),s._v(" "),t("p",[s._v("**$# **表示提供到shell脚本或者函数的参数总数；")]),s._v(" "),t("p",[s._v('**$?**是shell变量,表示"最后一次执行命令"的退出状态，0为成功，非0为失败。')]),s._v(" "),t("h3",{attrs:{id:"与-的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#与-的区别"}},[s._v("#")]),s._v(" ./与. ./的区别")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://www.cnblogs.com/xuange306/p/8304289.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux里面的命令：./和. /(这里有空格)的区别"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v("./")]),s._v(": 当前目录（相对路径的写法）")]),s._v(" "),t("p",[t("code",[s._v(". /")]),s._v("：有空格的点号等同于"),t("code",[s._v("source")]),s._v("命令,表示在当前shell环境执行后面的命令或脚本（不加点号默认是新开一个shell执行的）")]),s._v(" "),t("p",[s._v("例如 ："),t("code",[s._v("/home/test.sh")]),s._v("等同于 "),t("code",[s._v("source /home/test.sh")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("source")]),s._v(":用source执行的脚本所做的任何改变会影响当前shell（如，其中如果用"),t("code",[s._v("cd")]),s._v("改变了目录，脚本执行完毕后，shell的目录就变了）；如果没用source，就不会影响当前shell。")]),s._v(" "),t("h3",{attrs:{id:"常用运算符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用运算符"}},[s._v("#")]),s._v(" 常用运算符")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://www.jianshu.com/p/617c1ee1e46e",target:"_blank",rel:"noopener noreferrer"}},[s._v("shell 中  &&   ||  ()  {}  用法"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[t("p",[s._v("逻辑与：&&")]),s._v(" "),t("p",[s._v("&&左边的命令（命令1）返回真(即返回0，成功被执行）后，&&右边的命令（命令2）才能够被执行；换句话说，“如果这个命令执行成功&&那么执行这个命令”。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("command1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" command2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" command3 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("逻辑或：||")]),s._v(" "),t("p",[s._v("||则与&&相反，如果||左边的命令（command1）未执行成功，那么就执行||右边的命令（command2）；或者换句话说，“如果这个命令执行失败了||那么就执行这个命令，实现短路逻辑或操作。")]),s._v(" "),t("p",[s._v("如果 dir目录不存在，将输出提示信息 fail ：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fail"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果 dir目录存在，将输出提示信息 success，否则输出fail：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fail"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("常用||组合示例：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$BASH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -q "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bash'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("系统调用exec是以新的进程去代替原来的进程，但进程的PID保持不变。因此，可以这样认为，exec系统调用并没有创建新的进程，只是替换了原来进程上下文的内容。原进程的代码段，数据段，堆栈段被新的进程所代替。")])]),s._v(" "),t("li",[t("p",[s._v("当前shell组合执行：()")]),s._v(" "),t("p",[s._v("如果希望把几个命令合在一起执行，shell提供了两种方法。既可以在当前shell也可以在子shell中执行一组命令。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("command1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("command2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("command3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("               多个命令之间用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("分隔\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("() 表示在当前 shell 中将多个命令作为一个整体执行。需要注意的是，使用 () 括起来的命令在执行前面都不会切换当前工作目录，也就是说命令组合都是在当前工作目录下被执行的，尽管命令中有切换目录的命令。")]),s._v(" "),t("p",[s._v("如果目录dir不存在，则执行组合命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cd /home/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -1h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("子shell组合执行：{}")]),s._v(" "),t("p",[s._v("相应的命令将在子shell而不是当前shell中作为一个整体被执行，只有在{}中所有命令的输出作为一个整体被重定向时，其中的命令才被放到子shell中执行，否则在当前shell执行。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" command1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("command2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("command3… "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("      注意：在使用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("时，"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("与命令之间必须使用一个空格\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在子shell中执行打印操作")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("A")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("A")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得到1 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("A")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("A")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得到1 1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("管道符号：|")]),s._v(" "),t("p",[s._v("参考链接：["),t("a",{attrs:{href:"https://www.cnblogs.com/aaronLinux/p/8340281.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("shell]shell 中| && || () {} 用法以及shell的逻辑与或非"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("把第一个命令command 1执行的结果作为command2的输入传给command 2，列出当前目录中的文档(含size)，并把输出送给sort命令作为输入，sort命令按数字递减的顺序把ls的输出排序。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -nr\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("-s表示file size，-n表示numeric-sort，-r表示reverse，反转")])]),s._v(" "),t("li",[t("p",[s._v("运算级优先级表")]),s._v(" "),t("p",[t("img",{attrs:{src:"/media/zwj/%E5%85%B1%E4%BA%AB%E7%9B%98/Markdown%E7%AC%94%E8%AE%B0/typora_pics/image-20191111160810357.png",alt:"由高级至低级"}})])])]),s._v(" "),t("h3",{attrs:{id:"if语句的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if语句的使用"}},[s._v("#")]),s._v(" if语句的使用")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://blog.51cto.com/lovelace/1211353",target:"_blank",rel:"noopener noreferrer"}},[s._v("shell 学习之if语句"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"条件测试类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件测试类型"}},[s._v("#")]),s._v(" 条件测试类型")]),s._v(" "),t("p",[s._v("整数测试、字符测试、文件测试；")]),s._v(" "),t("h4",{attrs:{id:"条件测试的表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件测试的表达式"}},[s._v("#")]),s._v(" 条件测试的表达式")]),s._v(" "),t("p",[s._v("[ expression ]： 括号两端必须要有空格\n[[ expression ]] ：括号两端必须要有空格\ntest expression\n组合测试条件：\n"),t("code",[s._v("-a")]),s._v(": and\n"),t("code",[s._v("-o")]),s._v(": or\n"),t("code",[s._v("!")]),s._v(": 非")]),s._v(" "),t("h4",{attrs:{id:"整数测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#整数测试"}},[s._v("#")]),s._v(" 整数测试")]),s._v(" "),t("p",[s._v('-eq 等于,如:if ["'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("−")]),t("mi",[s._v("e")]),t("mi",[s._v("q")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" -eq "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.77777em","vertical-align":"-0.08333em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),t("span",{staticClass:"mbin"},[s._v("−")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("e")]),t("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.03588em"}},[s._v("q")]),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b" ]\n-ne 不等于,如:if ["'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("−")]),t("mi",[s._v("n")]),t("mi",[s._v("e")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" -ne "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.77777em","vertical-align":"-0.08333em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),t("span",{staticClass:"mbin"},[s._v("−")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("n")]),t("span",{staticClass:"mord mathdefault"},[s._v("e")]),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b" ]\n-gt 大于,如:if ["'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("−")]),t("mi",[s._v("g")]),t("mi",[s._v("t")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" -gt "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.77777em","vertical-align":"-0.08333em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),t("span",{staticClass:"mbin"},[s._v("−")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),t("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),t("span",{staticClass:"mord mathdefault"},[s._v("t")]),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b" ]\n-ge 大于等于,如:if ["'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("−")]),t("mi",[s._v("g")]),t("mi",[s._v("e")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" -ge "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.77777em","vertical-align":"-0.08333em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),t("span",{staticClass:"mbin"},[s._v("−")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),t("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),t("span",{staticClass:"mord mathdefault"},[s._v("e")]),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b" ]\n-lt 小于,如:if ["'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("−")]),t("mi",[s._v("l")]),t("mi",[s._v("t")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" -lt "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.77777em","vertical-align":"-0.08333em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),t("span",{staticClass:"mbin"},[s._v("−")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),t("span",{staticClass:"mord mathdefault"},[s._v("t")]),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b" ]\n-le 小于等于,如:if ["'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("−")]),t("mi",[s._v("l")]),t("mi",[s._v("e")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" -le "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.77777em","vertical-align":"-0.08333em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),t("span",{staticClass:"mbin"},[s._v("−")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),t("span",{staticClass:"mord mathdefault"},[s._v("e")]),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b" ]\n< 小于(需要双括号),如:(("'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("<")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" < "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.73354em","vertical-align":"-0.0391em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),t("span",{staticClass:"mrel"},[s._v("<")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b"))\n<= 小于等于(需要双括号),如:(("'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v("<")]),t("mo",[s._v("=")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" <= "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.73354em","vertical-align":"-0.0391em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),t("span",{staticClass:"mrel"},[s._v("<")])]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.36687em","vertical-align":"0em"}}),t("span",{staticClass:"mrel"},[s._v("=")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b"))\n>大于(需要双括号),如:(("'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v(">")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" >"')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.73354em","vertical-align":"-0.0391em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),t("span",{staticClass:"mrel"},[s._v(">")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b"))\n>= 大于等于(需要双括号),如:(("'),t("eq",[t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[t("semantics",[t("mrow",[t("mi",[s._v("a")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')]),t("mo",[s._v(">")]),t("mo",[s._v("=")]),t("mi",{attrs:{mathvariant:"normal"}},[s._v('"')])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[s._v('a" >= "')])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.73354em","vertical-align":"-0.0391em"}}),t("span",{staticClass:"mord mathdefault"},[s._v("a")]),t("span",{staticClass:"mord"},[s._v('"')]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),t("span",{staticClass:"mrel"},[s._v(">")])]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.36687em","vertical-align":"0em"}}),t("span",{staticClass:"mrel"},[s._v("=")]),t("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),t("span",{staticClass:"mord"},[s._v('"')])])])])]),s._v('b"))')],1),s._v(" "),t("h4",{attrs:{id:"字符串比较"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字符串比较"}},[s._v("#")]),s._v(" 字符串比较")]),s._v(" "),t("p",[t("code",[s._v("==")]),s._v(" 等于 两边要有空格\n"),t("code",[s._v("!=")]),s._v(" 不等\n"),t("code",[s._v(">")]),s._v("  大于\n"),t("code",[s._v("<")]),s._v("   小于`")]),s._v(" "),t("h4",{attrs:{id:"文件测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件测试"}},[s._v("#")]),s._v(" 文件测试")]),s._v(" "),t("p",[t("code",[s._v("-z string")]),s._v("：测试指定字符是否为空，空着真，非空为假；\n"),t("code",[s._v("-n string")]),s._v("：测试指定字符串是否为不空，空为假 非空为真；\n"),t("code",[s._v("-e file")]),s._v("：测试文件是否存在；\n"),t("code",[s._v("-f file")]),s._v("： 测试文件是否为普通文件；\n"),t("code",[s._v("-d file")]),s._v("：测试指定路径是否为目录；\n"),t("code",[s._v("-r file")]),s._v("：测试文件对当前用户是否可读；\n"),t("code",[s._v("-w file")]),s._v("：测试文件对当前用户是否可写；\n"),t("code",[s._v("-x file")]),s._v(" ：测试文件对当前用户是都可执行；\n"),t("code",[s._v("-z")]),s._v(" ：是否为空 为空则为真；\n"),t("code",[s._v("-a")]),s._v("：是否不空；")]),s._v(" "),t("h4",{attrs:{id:"if语法结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if语法结构"}},[s._v("#")]),s._v(" if语法结构")]),s._v(" "),t("ul",[t("li",[s._v("单分支")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 判断条件；then\nstatement1\nstatement2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("双分支")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 判断条件；then\nstatement1\nstatement2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\nstatement3\nstatement4\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("注意点")]),s._v(" "),t("p",[s._v("if语句进行判断是否为空："),t("code",[s._v('[ "$name” = "" ]')]),s._v("等同于"),t("code",[s._v('[ ! "$name" ]')]),s._v("或"),t("code",[s._v('[ -z "$name" ]')]),s._v("；")]),s._v(" "),t("p",[s._v("使用if语句的时候进行判断如果是进行数值类的 ，建议使用 "),t("code",[s._v("let(())")]),s._v("进行判断，"),t("code",[s._v("(())")]),s._v("中变量是可以不使用"),t("code",[s._v("$")]),s._v("来引用的；")]),s._v(" "),t("p",[s._v("对于字符串等使用"),t("code",[s._v("test[ ]")]),s._v(" or"),t("code",[s._v("[[ ]]")]),s._v("进行判断；")])])]),s._v(" "),t("h4",{attrs:{id:"条件测试的写法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件测试的写法"}},[s._v("#")]),s._v(" 条件测试的写法")]),s._v(" "),t("ul",[t("li",[s._v("执行一个命令的结果："),t("code",[s._v('if grep -q "rm" fs.sh;then')])]),s._v(" "),t("li",[s._v("传回一个命令执行结果的相反值 ："),t("code",[s._v('if ！grep -q "rm" fs.sh;then')])]),s._v(" "),t("li",[s._v("使用复合命令（（算式））："),t("code",[s._v("if ((a>b));then")])]),s._v(" "),t("li",[s._v("使用bash关键字 [[判断式]]："),t("code",[s._v("if [[ str > xyz ]];then")])]),s._v(" "),t("li",[s._v("使用内置命令：test 判断式："),t("code",[s._v('if test "str" \\> "xyz";then')])]),s._v(" "),t("li",[s._v("使用内置命令：[判断式] 类似test："),t("code",[s._v('if [ "str" \\> "xyz" ];then')])]),s._v(" "),t("li",[s._v("使用-a -o进行逻辑组合："),t("code",[s._v("[ -r filename -a -x filename ]")])]),s._v(" "),t("li",[s._v("命令&&命令")]),s._v(" "),t("li",[s._v("命令||命令："),t("code",[s._v('if grep -q "rm" fn.sh || [ $a -lt 100 ];then')])])]),s._v(" "),t("h2",{attrs:{id:"待整理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#待整理"}},[s._v("#")]),s._v(" 待整理")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("中断程序而不关闭终端")]),s._v(" "),t("p",[s._v("参考链接："),t("a",{attrs:{href:"https://www.cnblogs.com/butterfly-clover/p/5761956.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux在终端启动程序关闭终端不退出的方法"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v("nohup 命令 &")]),s._v("：如"),t("code",[s._v("nohup ./studio.sh &")])])]),s._v(" "),t("li",[t("p",[s._v("terminator的技巧")]),s._v(" "),t("p",[s._v("将terminator设为默认终端；")]),s._v(" "),t("p",[s._v("在别的窗口打开它后，按住红色窄条可以拖到已有的多终端集成窗口；")]),s._v(" "),t("p",[s._v("在空白处右键即可配置首选项，比如皮肤更换等；")])]),s._v(" "),t("li",[t("p",[s._v("查看文件夹树形结构")]),s._v(" "),t("p",[s._v("tree："),t("code",[s._v("sudo apt-get install tree")])]),s._v(" "),t("p",[s._v("常用格式："),t("code",[s._v("tree [option] [directory]")])]),s._v(" "),t("p",[s._v("常用参数[option]：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("-a:显示所有文件及目录")])]),s._v(" "),t("li",[t("p",[s._v("-d:只显示目录")])]),s._v(" "),t("li",[t("p",[s._v("-l:如遇到符号链接的目录，直接列出所指向的目录结构")])]),s._v(" "),t("li",[t("p",[s._v("-f:在每个文件前显示完整的路径")])]),s._v(" "),t("li",[t("p",[s._v("-L level:限制目录显示层级")]),s._v(" "),t("p",[s._v("只查看第一级的目录和文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ tree -L "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("把目录结构信息保存到文本中")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ tree -L "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /home/php-note.com/tree.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("-I:忽略目录下的文件夹或目录")])])]),s._v(" "),t("p",[s._v("[directory]:tree 命令作用于哪个目录下，默认当前目录。")])]),s._v(" "),t("li",[t("p",[s._v("Sublime Text的侧边栏隐藏快捷键")]),s._v(" "),t("p",[s._v("默认方式：先按"),t("code",[s._v("ctrl+k")]),s._v("，再按"),t("code",[s._v("ctrl+b")])]),s._v(" "),t("p",[s._v("自定义：依次打开"),t("code",[s._v("Preferences—Key Bingings")]),s._v("，搜索"),t("code",[s._v("toggle_side_bar")]),s._v("，可以看到系统的定义，我自定义为"),t("code",[s._v("ctrl+b")]),s._v("，与firefox一致")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keys"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ctrl+b"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"command"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"toggle_side_bar"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Sublime Text中打开软链接：右键——"),t("code",[s._v("Reveal Link Source")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);